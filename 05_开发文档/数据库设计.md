# æ•°æ®åº“è®¾è®¡ / Database Design

**ç‰ˆæœ¬**ï¼šv0.1ï¼ˆå ä½ï¼‰  
**æ›´æ–°æ—¥æœŸ**ï¼š2026-01-27  
**çŠ¶æ€**ï¼šğŸ“ å¾…å¼€å‘æ—¶è¯¦ç»†è¡¥å……

---

## è¯´æ˜

æœ¬æ–‡æ¡£å°†åœ¨V0å¼€å‘å¯åŠ¨æ—¶è¯¦ç»†è¡¥å……ï¼ŒåŒ…å«ï¼š

1. **æ•°æ®åº“è¡¨ç»“æ„**
   - ç§Ÿæˆ·è¡¨ï¼ˆtenantsï¼‰
   - å®¢æˆ·è¡¨ï¼ˆcustomersï¼‰
   - è¯Šæ–­è®°å½•è¡¨ï¼ˆdiagnosis_recordsï¼‰
   - æ”¹é€ æ–¹æ¡ˆè¡¨ï¼ˆimprovement_plansï¼‰
   - å®¡è®¡æ—¥å¿—è¡¨ï¼ˆaudit_logsï¼‰
   - é…ç½®è¡¨ï¼ˆtenant_configsï¼‰
   - è®¢å•è¡¨ï¼ˆcommission_ordersï¼‰

2. **è¡¨å…³ç³»è®¾è®¡**
   - ERå›¾
   - å¤–é”®å…³ç³»
   - ç´¢å¼•è®¾è®¡

3. **æ•°æ®å­—å…¸**
   - æ¯ä¸ªå­—æ®µçš„å«ä¹‰
   - æ•°æ®ç±»å‹
   - çº¦æŸæ¡ä»¶

4. **è¿ç§»è„šæœ¬**
   - Alembicè¿ç§»æ–‡ä»¶
   - åˆå§‹åŒ–æ•°æ®è„šæœ¬

---

## å¿«é€Ÿé¢„è§ˆï¼ˆæ ¸å¿ƒè¡¨ï¼‰

### ç§Ÿæˆ·è¡¨ï¼ˆtenantsï¼‰

```sql
CREATE TABLE tenants (
    id INTEGER PRIMARY KEY,
    company_name TEXT NOT NULL,
    contact_phone TEXT,
    logo_url TEXT,
    primary_color TEXT DEFAULT '#1890ff',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### å®¢æˆ·è¡¨ï¼ˆcustomersï¼‰

```sql
CREATE TABLE customers (
    id INTEGER PRIMARY KEY,
    tenant_id INTEGER NOT NULL,
    company_name TEXT NOT NULL,
    registered_capital DECIMAL,
    established_date DATE,
    legal_person_name TEXT,
    annual_invoice DECIMAL,
    annual_tax DECIMAL,
    tier TEXT CHECK(tier IN ('A', 'B', 'C')),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (tenant_id) REFERENCES tenants(id)
);
```

---

**å¾…è¡¥å……**ï¼šå®Œæ•´çš„è¡¨ç»“æ„è®¾è®¡å°†åœ¨å¼€å‘æ—¶æ·»åŠ 

**å‚è€ƒæ–‡æ¡£**ï¼š
- [V0å¼€å‘è®¡åˆ’](V0å¼€å‘è®¡åˆ’.md)
- [æŠ€æœ¯æ ˆé€‰æ‹©](æŠ€æœ¯æ ˆé€‰æ‹©.md)
