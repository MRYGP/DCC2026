# V1轻复制产品需求文档

**版本**：v1.0  
**创建日期**：2026-02-06  
**目标阶段**：V1（3-9月）  
**产品定位**：让90%中介觉得"像自己的"  

---

## 一、产品概述

### 1.1 产品定位

**轻复制 = 一套代码 + 多个皮肤（partner_id机制）**
```
技术主体：贷查查
品牌呈现：中介品牌
客户感知："在XX贷款顾问的系统里"
数据归属：中介拥有客户数据
```

### 1.2 与V0/V2的区别

| 维度 | V0（0-3月）| V1（3-9月）⭐ | V2（9-18月）|
|------|-----------|-------------|------------|
| **产品形态** | H5体验器 | H5+小程序（轻复制）| 真白标（中介自有账号）|
| **品牌呈现** | 统一"贷查查" | partner_id皮肤 | 中介自有品牌 |
| **技术成本** | 1x | 1x | 10x |
| **适用对象** | 3个试点中介 | 10-30个中介（90%）| 10%头部中介 |
| **收费标准** | 免费（测试）| 5000元/年 | 2-5万/年 |

### 1.3 核心价值

**对中介**：
- ✅ 低成本拥有"自己的"系统（5000元/年 vs 真白标2-5万/年）
- ✅ 品牌独立呈现（Logo/名称/联系方式）
- ✅ 客户数据归属清晰（不是平台的）
- ✅ 朋友圈获客利器（海报生成器）

**对我们**：
- ✅ 开发成本低（一套代码服务多个中介）
- ✅ 维护成本低（bug修复一次，所有中介受益）
- ✅ 快速扩展（不被审核拖累）
- ✅ 规模效应（服务越多中介，边际成本越低）

---

## 二、核心功能需求

### 2.1 partner_id机制 ⭐⭐⭐⭐

#### 功能描述

**每个中介一个专属ID（M001, M002...），通过URL参数或二维码传递，动态加载对应品牌配置**

#### 用户场景

**场景1：中介配置品牌**
```
1. 中介登录后台
2. 进入"品牌配置"页面
3. 填写品牌信息：
   ├─ 上传Logo（jpg/png，<2MB）
   ├─ 输入品牌名称（如"XX贷款顾问"）
   ├─ 输入联系方式（手机/微信/地址）
   └─ 选择主题色（可选）
4. 系统自动分配partner_id（如M001）
5. 生成专属链接和二维码
6. 中介下载二维码
```

**场景2：客户访问**
```
1. 客户扫描中介专属二维码
2. 进入URL：domain.com?partner_id=M001
3. 系统识别partner_id=M001
4. 加载对应品牌配置：
   ├─ 页面Logo → tenants.logo_url
   ├─ 页面名称 → tenants.brand_name
   ├─ 联系方式 → tenants.contact_phone/wechat
   └─ 主题色 → tenants.theme_color
5. 客户填写13字段表单
6. 提交时自动标记：
   ├─ customers.source_partner_id = M001
   └─ customers.middleman_id = M001对应的tenant_id
7. 数据归属：中介A
```

#### 功能详细设计

**2.1.1 品牌配置管理**

**页面路径**：`/admin/brand-config`

**页面元素**：
```
┌─────────────────────────────────────┐
│  品牌配置                            │
├─────────────────────────────────────┤
│                                     │
│  Logo上传：                         │
│  ┌──────────┐                       │
│  │ [+]      │  点击上传              │
│  │  上传Logo │  支持jpg/png，<2MB     │
│  └──────────┘                       │
│                                     │
│  品牌名称：                         │
│  ┌──────────────────────────────┐   │
│  │ XX贷款顾问                    │   │
│  └──────────────────────────────┘   │
│                                     │
│  联系电话：                         │
│  ┌──────────────────────────────┐   │
│  │ 138****1234                  │   │
│  └──────────────────────────────┘   │
│                                     │
│  微信号：                           │
│  ┌──────────────────────────────┐   │
│  │ xxx                          │   │
│  └──────────────────────────────┘   │
│                                     │
│  联系地址：                         │
│  ┌──────────────────────────────┐   │
│  │ 长沙市                        │   │
│  └──────────────────────────────┘   │
│                                     │
│  主题色：                           │
│  ┌─┬─┬─┬─┬─┬─┬─┬─┐                 │
│  │█│█│█│█│█│█│█│█│  8个预设色      │
│  └─┴─┴─┴─┴─┴─┴─┴─┘                 │
│                                     │
│  [保存配置]                         │
│                                     │
├─────────────────────────────────────┤
│  您的专属信息：                      │
│                                     │
│  专属ID：M001                       │
│  专属链接：                         │
│  https://domain.com?partner_id=M001 │
│  [复制链接]                         │
│                                     │
│  专属二维码：                       │
│  ┌──────────┐                       │
│  │ [QR CODE]│                       │
│  │          │                       │
│  └──────────┘                       │
│  [下载二维码]                       │
│                                     │
└─────────────────────────────────────┘
```

**字段验证规则**：
```yaml
logo_url:
  - 格式：jpg/png
  - 大小：<2MB
  - 推荐尺寸：200x200px
  - 必填：否（有默认Logo）

brand_name:
  - 类型：文本
  - 长度：2-50字符
  - 必填：是
  - 默认值：[公司名称]

contact_phone:
  - 格式：手机号（11位）
  - 必填：是
  - 验证：正则表达式

contact_wechat:
  - 类型：文本
  - 长度：6-20字符
  - 必填：否

contact_address:
  - 类型：文本
  - 长度：4-200字符
  - 必填：否

theme_color:
  - 格式：hex颜色值
  - 默认：#1890ff
  - 必填：否
  - 预设：8个常用色
```

**2.1.2 前端动态加载**

**技术实现**：
```javascript
// 1. 页面加载时解析URL参数
const urlParams = new URLSearchParams(window.location.search);
const partnerId = urlParams.get('partner_id');

// 2. 如果有partner_id，调用API获取品牌配置
if (partnerId) {
  const brandConfig = await fetch(`/api/brand-config?partner_id=${partnerId}`)
    .then(res => res.json());
  
  // 3. 动态更新页面元素
  // Logo
  document.getElementById('logo').src = brandConfig.logo_url || '/default-logo.png';
  
  // 品牌名称
  document.getElementById('brand-name').textContent = brandConfig.brand_name;
  document.title = brandConfig.brand_name; // 更新浏览器标题
  
  // 联系方式
  document.getElementById('contact-phone').textContent = brandConfig.contact_phone;
  document.getElementById('contact-wechat').textContent = brandConfig.contact_wechat || '';
  document.getElementById('contact-address').textContent = brandConfig.contact_address || '';
  
  // 主题色
  document.documentElement.style.setProperty('--theme-color', brandConfig.theme_color);
  
  // 4. 保存到localStorage（避免刷新丢失）
  localStorage.setItem('current_partner_id', partnerId);
  localStorage.setItem('brand_config', JSON.stringify(brandConfig));
}

// 5. 表单提交时自动带上partner_id
function submitForm(formData) {
  formData.source_partner_id = partnerId;
  formData.source_url = window.location.href;
  formData.source_channel = 'h5_link'; // 或 'qr_code'
  
  return fetch('/api/customers', {
    method: 'POST',
    body: JSON.stringify(formData)
  });
}
```

**2.1.3 后端API设计**

**API 1：获取品牌配置**
```
GET /api/customers', {
    method: 'POST',
    body: JSON.stringify(formData)
  });
}
```

**2.1.3 后端API设计**

**API 1：获取品牌配置**
```
GET /api/brand-config?partner_id=M001

Response:
{
  "partner_id": "M001",
  "brand_name": "XX贷款顾问",
  "logo_url": "https://xxx/logo.png",
  "contact_phone": "138****1234",
  "contact_wechat": "xxx",
  "contact_address": "长沙市",
  "theme_color": "#1890ff"
}
```

**API 2：保存品牌配置**
```
POST /api/brand-config
Headers: Authorization: Bearer <token>

Request:
{
  "brand_name": "XX贷款顾问",
  "logo_url": "https://xxx/logo.png",
  "contact_phone": "13800001234",
  "contact_wechat": "xxx",
  "contact_address": "长沙市",
  "theme_color": "#1890ff"
}

Response:
{
  "success": true,
  "partner_id": "M001",
  "qr_code_url": "https://xxx/qr/M001.png"
}
```

**API 3：生成专属二维码**
```
POST /api/generate-qrcode
Headers: Authorization: Bearer <token>

Request:
{
  "partner_id": "M001"
}

Response:
{
  "qr_code_url": "https://xxx/qr/M001.png",
  "target_url": "https://domain.com?partner_id=M001"
}
```

#### 验收标准

**功能验收**：
- [ ] 中介可配置品牌信息（Logo/名称/联系方式）
- [ ] 系统自动生成partner_id（唯一）
- [ ] 系统自动生成专属链接和二维码
- [ ] 客户访问专属链接，页面显示中介品牌
- [ ] 客户提交数据，自动标记source_partner_id
- [ ] 数据归属清晰（可按partner_id筛选客户）

**体验验收**：
- [ ] 客户感觉："在XX贷款顾问的系统里"（而非"在贷查查"）
- [ ] 页面Logo/名称/联系方式都是中介品牌
- [ ] 主题色统一（可选）
- [ ] 刷新页面，品牌配置不丢失

**性能验收**：
- [ ] 品牌配置加载时间<500ms
- [ ] Logo图片加载时间<1s
- [ ] 二维码生成时间<2s

---

### 2.2 朋友圈海报生成器 ⭐⭐⭐⭐⭐（杀手级功能）

#### 功能描述

**一键生成带中介品牌的朋友圈海报（6个模板，30秒生成，完全免费）**

#### 为什么是杀手级功能

**现实数据**：
- 90%中介都在发朋友圈（每天3-5条）
- <10%中介有公众号且会运营
- 朋友圈是中介最主要的获客渠道

**痛点**：
- 不会设计：90%中介不会做海报
- 成本高：外包设计师50-200元/张
- 品牌不统一：质量参差不齐
- 没有二维码：发了海报客户不知道怎么联系

**我们的解决方案**：
- 系统自动生成：6个模板（对应6个体质桶）
- 一键生成：30秒完成
- 自动带品牌：Logo + 名称 + 二维码
- 完全免费：0成本

#### 用户场景

**场景：中介生成朋友圈海报**
```
1. 中介登录后台
2. 点击"生成海报"
3. 选择模板（6个体质桶）：
   ├─ 流水体质诊断海报
   ├─ 票税体质诊断海报
   ├─ 征信体质诊断海报
   ├─ 资产体质诊断海报
   ├─ 资质体质诊断海报
   └─ 行业体质诊断海报
4. 实时预览（显示中介品牌）
5. 点击"下载"
6. 保存到手机相册
7. 打开微信 → 发朋友圈
8. 配文案："测测你的流水体质"
```

**场景：客户看到海报并转化**
```
1. 客户刷朋友圈
2. 看到中介发的海报
3. 感兴趣 → 长按识别二维码
4. 进入H5页面（带partner_id）
5. 页面显示"XX贷款顾问"
6. 填写13字段 → 提交
7. 获得ABC分层报告
8. 报告末尾："想了解更多？联系XX顾问 138****1234"
9. 客户联系中介 → 成交
```

#### 功能详细设计

**2.2.1 海报模板设计（6个模板）**

**模板1：流水体质诊断海报**
```
尺寸：1080x1920（9:16，适合手机屏幕）
文件格式：PNG（带透明背景）

固定元素：
┌─────────────────────────────────┐
│  [Logo]  XX贷款顾问   ← 中介Logo+名称
├─────────────────────────────────┤
│                                 │
│  你以为银行看流水规模，          │  ← 反差钩子
│  其实80%死在这3个细节            │
│                                 │
│  ✓ 3步自测你的流水体质           │  ← 价值承诺
│  ✓ 1分钟知道能贷多少             │
│  ✓ 免费生成改造方案              │
│                                 │
│  [二维码]                       │  ← 专属二维码
│  扫码测试                       │
│                                 │
│  联系方式：138****1234          │  ← 中介联系方式
└─────────────────────────────────┘

可变参数（中介配置）：
- Logo：tenants.logo_url
- 品牌名称：tenants.brand_name
- 联系方式：tenants.contact_phone
- 二维码内容：domain.com?partner_id=M001&source=moments_flow
- 主题色：tenants.theme_color（可选）

固定参数（内容桶）：
- 标题：你以为银行看流水规模，其实80%死在这3个细节
- 价值承诺：3步自测/1分钟/免费
- 体质类型：流水体质
```

**其他5个模板**：
- 模板2：票税体质诊断海报（标题：你以为银行看开票额，其实80%死在票税比）
- 模板3：征信体质诊断海报（标题：你以为征信没逾期就行，其实80%死在查询次数）
- 模板4：资产体质诊断海报（标题：你以为有房就能贷，其实80%死在抵押率）
- 模板5：资质体质诊断海报（标题：你以为高新资质没用，其实额度能翻倍）
- 模板6：行业体质诊断海报（标题：你以为行业不重要，其实80%死在准入限制）

**2.2.2 技术实现方案**

**方案A：Canvas动态生成（推荐）**
```javascript
async function generatePoster(templateType, brandConfig) {
  // 1. 创建Canvas
  const canvas = document.createElement('canvas');
  canvas.width = 1080;
  canvas.height = 1920;
  const ctx = canvas.getContext('2d');
  
  // 2. 加载背景模板
  const templateMap = {
    'flow': '/templates/flow-template.png',
    'invoice': '/templates/invoice-template.png',
    'credit': '/templates/credit-template.png',
    'asset': '/templates/asset-template.png',
    'qualification': '/templates/qualification-template.png',
    'industry': '/templates/industry-template.png'
  };
  const bgImg = await loadImage(templateMap[templateType]);
  ctx.drawImage(bgImg, 0, 0, 1080, 1920);
  
  // 3. 绘制中介Logo
  const logoImg = await loadImage(brandConfig.logo_url);
  ctx.drawImage(logoImg, 50, 50, 150, 150);
  
  // 4. 绘制中介名称
  ctx.fillStyle = brandConfig.theme_color || '#1890ff';
  ctx.font = 'bold 48px PingFang SC';
  ctx.fillText(brandConfig.brand_name, 220, 120);
  
  // 5. 绘制二维码
  const qrcodeUrl = `${domain}?partner_id=${brandConfig.partner_id}&source=moments_${templateType}`;
  const qrcodeImg = await generateQRCode(qrcodeUrl);
  ctx.drawImage(qrcodeImg, 390, 1400, 300, 300);
  
  // 6. 绘制联系方式
  ctx.fillStyle = '#666666';
  ctx.font = '36px PingFang SC';
  ctx.fillText(`联系方式：${brandConfig.contact_phone}`, 340, 1760);
  
  // 7. 导出图片
  return canvas.toDataURL('image/png');
}

// 辅助函数：加载图片
function loadImage(url) {
  return new Promise((resolve, reject) => {
    const img = new Image();
    img.crossOrigin = 'Anonymous';
    img.onload = () => resolve(img);
    img.onerror = reject;
    img.src = url;
  });
}

// 辅助函数：生成二维码
async function generateQRCode(url) {
  const QRCode = window.QRCode;
  return new Promise((resolve, reject) => {
    const qr = new QRCode(document.createElement('div'), {
      text: url,
      width: 300,
      height: 300
    });
    const img = new Image();
    img.onload = () => resolve(img);
    img.onerror = reject;
    img.src = qr._el.querySelector('img').src;
  });
}
```

**方案B：服务端生成（备选）**
```python
# Python + Pillow
from PIL import Image, ImageDraw, ImageFont
import qrcode

def generate_poster(template_type, brand_config):
    # 1. 加载背景模板
    bg = Image.open(f'templates/{template_type}-template.png')
    
    # 2. 加载Logo
    logo = Image.open(brand_config['logo_url']).resize((150, 150))
    bg.paste(logo, (50, 50))
    
    # 3. 绘制品牌名称
    draw = ImageDraw.Draw(bg)
    font = ImageFont.truetype('PingFang.ttc', 48)
    draw.text((220, 120), brand_config['brand_name'], fill=brand_config['theme_color'], font=font)
    
    # 4. 生成并粘贴二维码
    qr_url = f"{domain}?partner_id={brand_config['partner_id']}&source=moments_{template_type}"
    qr = qrcode.make(qr_url).resize((300, 300))
    bg.paste(qr, (390, 1400))
    
    # 5. 绘制联系方式
    font_small = ImageFont.truetype('PingFang.ttc', 36)
    draw.text((340, 1760), f"联系方式：{brand_config['contact_phone']}", fill='#666666', font=font_small)
    
    # 6. 保存图片
    output_path = f"posters/{brand_config['partner_id']}_{template_type}_{int(time.time())}.png"
    bg.save(output_path)
    return output_path
```

**2.2.3 页面交互设计**

**页面路径**：`/admin/poster-generator`

**页面元素**：
```
┌─────────────────────────────────────┐
│  朋友圈海报生成器                    │
├─────────────────────────────────────┤
│                                     │
│  选择模板：                         │
│  ┌────┬────┬────┐                   │
│  │流水│票税│征信│                   │
│  │体质│体质│体质│                   │
│  └────┴────┴────┘                   │
│  ┌────┬────┬────┐                   │
│  │资产│资质│行业│                   │
│  │体质│体质│体质│                   │
│  └────┴────┴────┘                   │
│                                     │
│  实时预览：                         │
│  ┌──────────────────┐               │
│  │                  │               │
│  │  [海报预览图]     │               │
│  │                  │               │
│  │                  │               │
│  │                  │               │
│  │                  │               │
│  └──────────────────┘               │
│                                     │
│  [下载海报]  [生成其他模板]         │
│                                     │
├─────────────────────────────────────┤
│  使用提示：                         │
│  1. 选择模板                        │
│  2. 预览效果                        │
│  3. 下载到手机                      │
│  4. 发朋友圈                        │
│                                     │
│  转化路径：                         │
│  朋友圈海报 → 扫码 → 填13字段       │
│  → ABC报告 → 联系中介 → 成交        │
└─────────────────────────────────────┘
```

**2.2.4 后端API设计**

**API：生成海报**
```
POST /api/generate-poster
Headers: Authorization: Bearer <token>

Request:
{
  "template_type": "flow",  // flow/invoice/credit/asset/qualification/industry
  "partner_id": "M001"
}

Response:
{
  "success": true,
  "poster_url": "https://xxx/posters/M001_flow_1707200000.png",
  "qr_code_url": "https://domain.com?partner_id=M001&source=moments_flow"
}
```

#### 验收标准

**功能验收**：
- [ ] 6个模板都可正常生成
- [ ] 海报包含中介Logo/名称/二维码/联系方式
- [ ] 二维码可正常扫描并跳转
- [ ] 下载的海报清晰（1080x1920）
- [ ] 生成速度<30秒

**体验验收**：
- [ ] 操作流程简单（3步：选模板→预览→下载）
- [ ] 实时预览（选择模板立即显示预览）
- [ ] 下载方便（一键保存到手机）
- [ ] 海报美观（设计专业，不显山寨）

**转化验收**：
- [ ] 客户扫码可正常进入H5页面
- [ ] H5页面显示中介品牌（不是"贷查查"）
- [ ] 客户填写提交后，数据标记source=moments_flow
- [ ] 可统计各模板转化率

---

### 2.3 小程序（V1.5）⭐⭐⭐

#### 功能描述

**贷查查主体小程序 + partner_id皮肤（轻复制，不是真白标）**

#### 与H5的关系

| 维度 | H5 | 小程序 |
|------|----|----|
| **产品形态** | 响应式网页 | 微信小程序 |
| **技术主体** | 贷查查 | 贷查查 |
| **品牌呈现** | partner_id皮肤 | partner_id皮肤 |
| **分享方式** | 发链接 | 小程序卡片/二维码 |
| **开发周期** | V0已完成 | V1.5（V1后期）|
| **体验** | 良好（H5） | 更好（小程序）|
| **适用场景** | 所有场景 | 微信内场景 |

**策略**：
- V0：只做H5（快速验证）
- V1.0-V1.3：继续用H5
- V1.5：新增小程序（体验升级）
- V2：继续保留H5+小程序

#### 技术方案

**方案A：Taro多端框架（推荐）⭐⭐⭐⭐⭐**
```
一套React代码 → 编译为：
├─ H5（Web）
├─ 微信小程序
├─ 支付宝小程序（可选）
└─ 字节小程序（可选）

优势：
- 开发成本低（一套代码）
- V0 H5代码直接复用
- 维护成本低（bug修复一次）
- 快速上线

劣势：
- 性能略低于原生（可接受）
- 部分小程序API需要适配

技术栈：
- Taro 3.x
- React 18
- TypeScript
- Ant Design Mobile
```

**方案B：原生小程序（不推荐）**
```
单独开发微信小程序代码

劣势：
- 开发成本高（两套代码）
- 维护成本高（H5+小程序分别维护）
- V0投入全部浪费（H5代码无法复用）
```

**决策：方案A（Taro多端框架）**

#### 功能详细设计

**2.3.1 小程序基本信息**
```yaml
小程序名称：贷查查
小程序主体：贷查查科技有限公司（示例）
类目：金融 - 信贷服务
审核资质：金融牌照或特殊资质

页面显示：
  - 小程序名称：贷查查（主体）
  - 页面内容：XX贷款顾问（中介品牌）
  - 客户感觉："在XX贷款顾问的小程序里"
```

**2.3.2 进入路径**

**路径1：扫码进入**
```
客户扫描小程序码
  ↓
小程序URL：pages/index/index?partner_id=M001
  ↓
onLoad(options) {
  const partnerId = options.partner_id;
  loadBrandConfig(partnerId);
}
  ↓
页面显示中介品牌
```

**路径2：分享卡片**
```
中介分享小程序卡片到微信群/好友
卡片标题："XX贷款顾问-贷款体检"
卡片图片：中介Logo
  ↓
客户点击卡片
  ↓
进入小程序（带partner_id）
  ↓
页面显示中介品牌
```

**2.3.3 代码实现**

**page/index/index.jsx**（Taro）：
```jsx
import { View, Image, Text } from '@tarojs/components';
import { useState, useEffect } from 'react';
import Taro from '@tarojs/taro';

export default function Index() {
  const [brandConfig, setBrandConfig] = useState(null);
  const [partnerId, setPartnerId] = useState(null);
  
  useEffect(() => {
    // 获取启动参数
    const { partner_id } = Taro.getCurrentInstance().router.params;
    if (partner_id) {
      setPartnerId(partner_id);
      loadBrandConfig(partner_id);
    }
  }, []);
  
  async function loadBrandConfig(partnerId) {
    try {
      const res = await Taro.request({
        url: `https://api.domain.com/brand-config?partner_id=${partnerId}`,
        method: 'GET'
      });
      setBrandConfig(res.data);
      
      // 保存到本地存储
      Taro.setStorageSync('current_partner_id', partnerId);
      Taro.setStorageSync('brand_config', res.data);
    } catch (error) {
      console.error('加载品牌配置失败', error);
    }
  }
  
  return (
    <View>
      {brandConfig && (
        <>
          {/* Logo */}
          <Image src={brandConfig.logo_url} className="logo" />
          
          {/* 品牌名称 */}
          <Text className="brand-name">{brandConfig.brand_name}</Text>
          
          {/* 13字段表单 */}
          {/* ... 表单组件 ... */}
          
          {/* 联系方式 */}
          <Text className="contact">联系方式：{brandConfig.contact_phone}</Text>
        </>
      )}
    </View>
  );
}
```

**2.3.4 分享功能**

**onShareAppMessage**（中介分享）：
```javascript
// 中介端：生成分享卡片
onShareAppMessage() {
  const brandConfig = Taro.getStorageSync('brand_config');
  const partnerId = Taro.getStorageSync('current_partner_id');
  
  return {
    title: `${brandConfig.brand_name} - 贷款体检`,
    path: `/pages/index/index?partner_id=${partnerId}`,
    imageUrl: brandConfig.logo_url || '/default-share.png'
  };
}
```

**客户端：收到分享卡片**
```
显示：
  标题："XX贷款顾问 - 贷款体检"
  图片：[中介Logo]
  
点击：
  进入小程序 → 带partner_id → 显示中介品牌
```

#### 审核策略

**主体审核**：
```
账号：贷查查主体
类目：金融 - 信贷服务
资质：金融牌照（如有）

审核重点：
  - 避免承诺性表述（"保证通过/包下款"）
  - 固化免责声明
  - 合规内容审核
  
审核周期：
  - 首次：7-14天
  - 后续更新：2-5天（小版本更新很少被审核）
```

**优势**：
- 只审核1次（vs 真白标每个中介单独审核）
- 后续更新快（小版本更新2-5天）
- 所有中介共用（不需要每个中介单独申请）

#### 验收标准

**功能验收**：
- [ ] 小程序可正常进入（扫码/分享卡片）
- [ ] partner_id机制正常（显示中介品牌）
- [ ] 13字段表单可正常填写提交
- [ ] ABC报告可正常生成
- [ ] 数据归属正确（source_partner_id标记）

**体验验收**：
- [ ] 加载速度快（首屏<3秒）
- [ ] 交互流畅（无卡顿）
- [ ] 样式适配（不同机型）
- [ ] 客户感觉："在XX贷款顾问的小程序里"

**审核验收**：
- [ ] 小程序审核通过
- [ ] 无违规内容
- [ ] 免责声明清晰

---

## 三、数据库设计补充

### 3.1 新增字段（已在v1.4预留）

**tenants表**：
```sql
partner_id VARCHAR(20) UNIQUE NOT NULL,
brand_name VARCHAR(100) NOT NULL,
logo_url VARCHAR(500),
contact_phone VARCHAR(20),
contact_wechat VARCHAR(50),
contact_address VARCHAR(200),
theme_color VARCHAR(20) DEFAULT '#1890ff'
```

**customers表**：
```sql
source_partner_id VARCHAR(20),
source_channel VARCHAR(50),  -- h5_link/qr_code/moments_flow/mini_program
source_url VARCHAR(500)
```

### 3.2 索引优化
```sql
-- tenants表
CREATE INDEX idx_partner_id ON tenants(partner_id);

-- customers表
CREATE INDEX idx_source_partner_id ON customers(source_partner_id);
CREATE INDEX idx_source_channel ON customers(source_channel);
```

---

## 四、运营配套

### 4.1 贷查查官方公众号

**定位**：内容生产中心
**频率**：每周2篇（实验流水线）
**内容类型**：
- 流水体质诊断方法
- 票税体质优化技巧
- 征信体质修复策略
- 产品政策解读
- 改造案例分析

**与中介的关系**：
- 中介转发到朋友圈/微信群
- 或使用朋友圈海报生成器（更高效）

### 4.2 中介获客路径

**路径1：朋友圈海报**（推荐）⭐⭐⭐⭐⭐
```
中介生成海报 → 发朋友圈 → 客户扫码 → 填表 → 报告 → 联系中介
```

**路径2：公众号转发**
```
贷查查发文 → 中介转发 → 客户点击 → 阅读 → 文末CTA → 体验器
```

**路径3：小程序分享**（V1.5）
```
中介分享小程序卡片 → 客户点击 → 填表 → 报告 → 联系中介
```

---

## 五、开发排期

### 5.1 V1.0（3月）- partner_id机制

**Week 1-2**：
- [ ] 数据库新增字段（tenants/customers）
- [ ] 品牌配置管理页面（后台）
- [ ] partner_id生成逻辑
- [ ] 专属链接/二维码生成

**Week 3-4**：
- [ ] 前端动态加载品牌配置
- [ ] H5页面适配（Logo/名称/联系方式）
- [ ] 提交数据时标记source_partner_id
- [ ] 测试：3个中介配置品牌

**验收**：
- 3个中介配置完成
- 客户访问专属链接，显示中介品牌
- 数据归属正确

---

### 5.2 V1.2（4月）- 朋友圈海报生成器

**Week 1-2**：
- [ ] 设计6个海报模板（设计师）
- [ ] Canvas动态生成代码
- [ ] 二维码生成逻辑
- [ ] 海报生成页面（后台）

**Week 3-4**：
- [ ] 实时预览功能
- [ ] 下载功能
- [ ] 性能优化（生成速度<30秒）
- [ ] 测试：生成100张海报

**验收**：
- 6个模板都可正常生成
- 海报清晰美观
- 二维码可正常扫描

---

### 5.3 V1.5（6月）- 小程序

**Week 1-2**：
- [ ] Taro框架集成
- [ ] H5代码迁移到Taro
- [ ] 小程序配置（appid/类目/权限）
- [ ] partner_id机制适配小程序

**Week 3-4**：
- [ ] 分享功能开发
- [ ] 样式适配（不同机型）
- [ ] 性能优化
- [ ] 提交审核

**验收**：
- 小程序审核通过
- partner_id机制正常
- 分享功能正常

---

## 六、风险与依赖

### 6.1 技术风险

| 风险 | 影响 | 概率 | 应对 |
|------|------|------|------|
| Canvas生成海报性能差 | 生成慢>30秒 | 中 | 改用服务端生成 |
| 小程序审核不通过 | 延期1-2周 | 低 | 提前准备合规材料 |
| Taro框架兼容性问题 | 部分功能无法实现 | 低 | 降级到原生小程序 |

### 6.2 业务风险

| 风险 | 影响 | 概率 | 应对 |
|------|------|------|------|
| 中介觉得"不像自己的" | 满意度<80% | 中 | 优化品牌呈现细节 |
| 朋友圈海报转化率低 | <5% | 中 | 优化海报设计 |
| 中介不愿付费5000元/年 | 收入目标未达成 | 低 | 提供免费试用期 |

### 6.3 依赖项

| 依赖 | 提供方 | 时间 | 状态 |
|------|--------|------|------|
| V0已完成 | 开发团队 | V0阶段 | 前置依赖 |
| 海报模板设计 | 设计师 | V1.2前 | 待确认 |
| 小程序账号申请 | 运营团队 | V1.5前 | 待确认 |
| 金融牌照（如需）| 法务团队 | V1.5前 | 待确认 |

---

## 七、验收标准总结

### 7.1 功能验收

**partner_id机制**：
- [ ] 中介可配置品牌
- [ ] 系统自动生成partner_id
- [ ] 客户访问显示中介品牌
- [ ] 数据归属正确

**朋友圈海报生成器**：
- [ ] 6个模板可生成
- [ ] 海报包含中介品牌+二维码
- [ ] 生成速度<30秒
- [ ] 下载方便

**小程序**：
- [ ] 小程序审核通过
- [ ] partner_id机制正常
- [ ] 分享功能正常
- [ ] 性能良好

### 7.2 体验验收

**中介端**：
- [ ] 配置流程简单（<5分钟）
- [ ] 生成海报方便（<1分钟）
- [ ] 效果满意（美观专业）

**客户端**：
- [ ] 感觉"在XX贷款顾问的系统里"
- [ ] 品牌呈现清晰
- [ ] 交互流畅

### 7.3 数据验收

**转化率目标**：
- [ ] 朋友圈海报点击率>5%
- [ ] 填表完成率>30%
- [ ] 客户咨询率>40%

**满意度目标**：
- [ ] 90%中介觉得"像自己的"
- [ ] 轻复制满意度>80%
- [ ] 愿意付费比例>70%

---

**文档状态**：✅ 已完成  
**下一步**：等待V0完成后启动V1开发  
**责任人**：产品团队  
**审核人**：技术负责人  
**最后更新**：2026-02-06