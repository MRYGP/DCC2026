# ============================================================
# 示例 Skill：虚构银行税贷（招聘/培训用，非真实产品）
#
# 用途：
#   - 候选人参考格式，了解 Skill 的完整结构
#   - 小作业对照模板（小作业要求你独立写出类似结构）
#   - 新人培训 Week 1 入门示例
#
# 注意：
#   - 本文件为虚构产品，不对应任何真实银行
#   - 单位全部使用「元」，不使用万元（这是单位陷阱测试的重点）
#   - 小作业中请基于题目给出的条件自己写，不要直接复制此文件
# ============================================================


# ============================================================
# 顶层快捷字段（可选，须与 metadata 完全一致）
# 作用：让人在文件顶部快速看到这是什么 Skill
# ============================================================
skill_id: "PRODUCT_EXAMPLE_TAX_001"
skill_name: "虚构银行税贷（示例）"
skill_type: "product"


# ============================================================
# metadata：Skill 的身份证
# 系统加载时以此为权威来源
# ============================================================
metadata:
  skill_id: "PRODUCT_EXAMPLE_TAX_001"    # 全局唯一，格式：PRODUCT_银行缩写_类型_序号
  skill_name: "虚构银行税贷（示例）"
  skill_type: "product"                  # product / solution / diagnosis
  source: "培训示例（虚构）"              # 信息来源：官网 / 客户经理 / 第三方 / 培训示例
  verified_date: "2026-02-18"            # 最后核验日期，格式 YYYY-MM-DD
  verified_by: "培训团队"
  region: "全国"                          # 适用地区
  version: "1.0.0"
  created_by: "admin@dcc2026.com"
  status: "active"                       # active = 系统加载；inactive = 跳过


# ============================================================
# product：产品基本信息（描述性，不参与匹配计算）
# ============================================================
product:
  bank: "虚构银行"
  bank_code: "EXAMPLE"
  category: "税贷"                        # 税贷 / 流水贷 / 抵押贷 / 发票贷 / 高新企业贷
  product_code: "TAX_LOAN_EXAMPLE_001"

  features:
    - "无需抵押"
    - "纯信用贷款"
    - "快速审批"

  interest_rate:
    type: "range"                         # range / fixed / floating
    min: 0.040                            # 年化利率 4.0%（小数，不是百分比）
    max: 0.080                            # 年化利率 8.0%
    description: "年化利率 4%-8%，以审批为准"

  term:
    unit: "month"                         # month / year
    options: [12, 24, 36]
    description: "最长 3 年"

  repayment_methods:
    - "等额本息"
    - "先息后本"


# ============================================================
# eligibility：准入条件（核心规则，匹配引擎在这里判断通过 / 不通过）
#
# logic:
#   all  → 所有条件都必须满足（AND）
#   any  → 任意一个条件满足即可（OR）
#
# operator 支持：
#   >=  <=  ==  !=  in  not_in  between  contains  matches
#
# 单位陷阱提示：
#   金额字段单位统一为「元」
#   例：月流水 10 万元 → value: 100000（不是 10）
# ============================================================
eligibility:
  logic: "all"

  conditions:

    # ------ 流水体质 ------
    - field: "monthly_revenue"         # 月均流水（元）
      operator: ">="
      value: 100000                    # 10 万元 = 100000 元（单位：元）
      description: "月均流水≥10万元"
      dimension: "流水体质"            # 对应六宫格维度，用于报告中展示

    # ------ 票税体质 ------
    - field: "annual_tax"              # 年纳税额（元）
      operator: ">="
      value: 10000                     # 1 万元 = 10000 元（单位：元）
      description: "年纳税≥1万元"
      dimension: "票税体质"

    # ------ 征信体质：查询次数 ------
    - field: "credit_query_6m"         # 近6月征信查询次数
      operator: "<="
      value: 6
      description: "近6个月征信查询≤6次"
      dimension: "征信体质"

    # ------ 征信体质：逾期记录 ------
    - field: "credit_overdue_m3"       # M3+ 逾期次数（近2年）
      operator: "=="
      value: 0
      description: "近2年无M3+逾期记录"
      dimension: "征信体质"

    # ------ 资质体质：企业年限 ------
    - field: "company_age_years"       # 企业成立年限（年）
      operator: ">="
      value: 1
      description: "企业成立≥1年"
      dimension: "资质体质"

    # ------ 行业体质：黑名单 ------
    - field: "industry"
      operator: "not_in"
      value:
        - "房地产开发"
        - "金融投资"
        - "娱乐业"
      description: "不接受房地产/金融投资/娱乐业"
      dimension: "行业体质"


# ============================================================
# amount_calculation：额度计算规则
#
# formula_type 支持（V0）：
#   expression → 基础算术公式（支持 min / max / abs / round）
#   table      → 分区间查表（左闭右开 [min, max)）
#
# 本示例使用 expression：
#   额度（元）= 年纳税（元）× 25
#   即：年纳税 1 万元 → 额度上限 25 万元
#
# amount_range：最终额度上下限（单位：元）
# ============================================================
amount_calculation:
  formula_type: "expression"
  formula: "annual_tax * 25"           # 变量名必须与 eligibility 中的 field 一致
  amount_range:
    min: 50000                         # 最低放款 5 万元（元）
    max: 3000000                       # 最高放款 300 万元（元）
  unit: "元"                           # 显式标注单位，防止混淆
  description: "额度 = 年纳税 × 25，上限300万元"


# ============================================================
# report_template：报告输出模板
# 匹配引擎用这里的文案生成给中介看的报告
# ============================================================
report_template:

  # 符合准入时的输出
  eligible_message: >
    该客户符合【虚构银行税贷】准入条件。
    预估可贷额度：{estimated_amount}元（以实际审批为准）。
    建议优先申请，资金到位较快。

  # 不符合准入时的输出（系统会自动填入具体失败条件）
  ineligible_message: >
    该客户暂不符合【虚构银行税贷】准入条件，
    主要差距：{failed_conditions}。
    建议先完成对应体质改造后再申请。

  # 必须包含的免责声明（不可删除）
  disclaimer: >
    以上结果仅供初步评估参考，不构成任何承诺或要约。
    实际贷款额度、利率及审批结果以银行正式审批为准。
    本系统不提供任何违法违规操作建议。


# ============================================================
# 小作业提示（此段仅用于培训，真实 Skill 不需要）
#
# 小作业要求你做什么：
#   1. 独立写一个类似结构的 YAML（题目会给你具体条件）
#   2. 写 Python 函数：读取 YAML + 客户 dict → 输出结果
#   3. 写 2 个 pytest：一个符合、一个不符合（覆盖边界=阈值）
#   4. README 说明怎么跑、怎么测
#
# 最容易踩的坑（单位陷阱）：
#   ❌ 错误：value: 10  （把10万元写成10，少了4个零）
#   ✅ 正确：value: 100000  （单位是元，10万元=100000元）
#
# 边界测试示例（"等于阈值"算通过还是不通过？）：
#   条件：monthly_revenue >= 100000
#   客户月流水 = 100000（恰好等于）→ 应该通过（>=包含等于）
#   这个边界用例必须写进 pytest
# ============================================================
