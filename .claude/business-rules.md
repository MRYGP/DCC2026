# 业务规则与术语表

**用途**：让Claude Code准确理解业务逻辑

---

## 核心概念

### 租户（Tenant）
- **定义**：一个中介公司 = 一个租户
- **特点**：数据完全隔离，配置独立
- **ID格式**：tenant_id（整数）

### 客户（Customer）
- **定义**：中介服务的企业主
- **归属**：必须属于某个租户
- **状态**：A类（可贷）、B类（改造）、C类（暂不跟进）

### 诊断（Diagnosis）
- **定义**：评估客户贷款体质的过程
- **输出**：体质分层（A/B/C）+ 可做产品 + 改造方案
- **依据**：13个关键字段 + 银行准入规则

### 改造方案（Improvement Plan）
- **定义**：帮助客户提升贷款体质的方案
- **类型**：票税改造、征信改造、资质改造、资产改造
- **包含**：缺口清单、任务清单、服务商推荐、效果预览、成本估算

---

## 13个关键字段

| 字段 | 英文名 | 类型 | 必填 | 说明 |
|------|--------|------|------|------|
| 企业名称 | company_name | 文本 | ✅ | 全称 |
| 注册资本 | registered_capital | 数字 | ✅ | 万元 |
| 成立时间 | established_date | 日期 | ✅ | YYYY-MM-DD |
| 法人姓名 | legal_person_name | 文本 | ✅ | 全名 |
| 法人年龄 | legal_person_age | 数字 | - | 岁 |
| 年开票额 | annual_invoice | 数字 | ✅ | 万元 |
| 年纳税额 | annual_tax | 数字 | ✅ | 万元 |
| 对公流水 | corporate_flow | 数字 | ✅ | 万元 |
| 法人征信 | legal_credit_status | 枚举 | ✅ | 好/一般/差 |
| 企业征信 | company_credit_status | 枚举 | - | 好/一般/差 |
| 主营业务 | main_business | 文本 | ✅ | 描述 |
| 行业分类 | industry | 枚举 | ✅ | 制造/贸易/科技/服务 |
| 贷款需求 | loan_demand | 数字 | ✅ | 万元 |

---

## 体质分层规则

### A类：现在能贷

**条件**（任一满足）：
- 年开票 ≥ 50万 且 征信好
- 年纳税 ≥ 5万 且 征信好
- 对公流水 ≥ 100万 且 征信好

**特征**：
- 至少满足1个银行产品的准入条件
- 不需要改造或改造成本很低

### B类：值得改造

**条件**：
- 不满足A类
- 但通过改造能达到A类
- 改造ROI > 3（回报是成本的3倍以上）

**特征**：
- 有明确的缺口（差一点就能满足）
- 改造周期可接受（3-6个月）
- 改造成本合理（占贷款额度10%以内）

### C类：暂不跟进

**条件**：
- 不满足A类和B类
- 改造成本太高或周期太长
- 客户条件太差

**特征**：
- 成立不足半年
- 征信很差（M3+逾期）
- 改造ROI < 1

---

## 银行产品类型

### 税贷
- **准入核心**：年纳税额
- **额度算法**：年纳税 × 10-30倍
- **特点**：线上申请，放款快

### 发票贷
- **准入核心**：年开票额
- **额度算法**：年开票 × 5-15%
- **特点**：要求发票真实

### 高新企业贷
- **准入核心**：高新资质或专精特新
- **额度算法**：固定额度（500-1000万）
- **特点**：利率优惠

### 抵押贷
- **准入核心**：房产/土地抵押
- **额度算法**：抵押物评估价 × 70%
- **特点**：额度大，利率低

---

## 改造方案类型

### 票税改造
- **作用**：提升年开票/纳税
- **方式**：H业务（增值税业务优化）
- **周期**：3-6个月
- **成本**：5-10万

### 征信改造
- **作用**：修复征信问题
- **方式**：异议申诉、债务重组
- **周期**：1-3个月
- **成本**：1-3万

### 资质改造
- **作用**：获取高新/专精特新资质
- **方式**：资质申报服务
- **周期**：6-12个月
- **成本**：8-15万

### 资产改造
- **作用**：增加企业资产
- **方式**：专利实缴、设备购置
- **周期**：1-3个月
- **成本**：5-20万

---

## 关键业务规则

### 规则1：租户隔离（最重要）

**描述**：不同中介的数据绝对不能混淆

**实现**：
```python
# 所有数据库查询必须包含租户过滤
customers = db.query(Customer).filter(
    Customer.tenant_id == current_tenant_id
).all()
```

**验证**：
- 登录中介A，只能看到A的客户
- 登录中介B，只能看到B的客户
- 不能通过API参数绕过租户隔离

### 规则2：操作留痕（审计）

**描述**：所有数据操作都要记录

**记录时机**：
- 查看客户详情（view）
- 创建客户（create）
- 更新客户信息（update）
- 删除客户（delete）
- 导出数据（export）

**日志格式**：
```json
{
  "tenant_id": 1,
  "user_id": 10,
  "action_type": "view",
  "resource_type": "customer",
  "resource_id": 100,
  "ip_address": "192.168.1.1",
  "created_at": "2026-01-27 10:00:00"
}
```

### 规则3：免责声明（不可删改）

**描述**：固化的免责声明，必须出现在所有报告中

**位置**：报告底部

**内容**：
```
⚠️ 重要声明：
1. 本报告为初步评估，不代表银行审批结果
2. 实际贷款额度、利率、期限以银行审批为准
3. 改造方案为建议性质，不保证改造后必然通过审批
4. 本评估基于客户提供信息，如信息不实导致偏差，后果由客户承担
```

**技术实现**：
- 写在常量中（不可修改）
- 自动添加到报告
- 不接受API参数控制是否显示

### 规则4：数据权属明确

**描述**：客户数据归中介所有

**实现**：
- 中介可随时导出所有数据
- 中介可随时删除所有数据
- 删除有30天冷却期（防误删）

### 规则5：服务商返佣披露

**描述**：推荐服务商前必须披露返佣关系

**实现**：
- 强制勾选披露声明
- 不勾选不能推荐
- 勾选记录可追溯

**声明内容**：
```
我已告知中介：本推荐服务商可能产生返佣分配；
返佣比例：服务商返佣的50%；
中介可自选服务商
```

---

## 术语缩写

| 缩写 | 全称 | 含义 |
|------|------|------|
| SaaS | Software as a Service | 软件即服务 |
| V0 | Version 0 | 最小可用版本（MVP） |
| P0/P1/P2 | Priority 0/1/2 | 优先级（0最高） |
| A/B/C | 客户分层 | A可贷、B改造、C暂不跟 |
| ROI | Return on Investment | 投资回报率 |
| M3+ | Mora 3+ | 逾期3个月以上 |
| H业务 | - | 增值税业务优化（敏感词，对外用"票税改造"） |

---

**最后更新**：2026-01-27
