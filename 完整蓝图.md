# DCC2026 完整蓝图 v2.0

**文档性质**：系统架构与路线图  
**创建日期**：2026-02-12  
**适用范围**：V0执行版 + V1/V2愿景规划  
**核心定位**：V0现实架构优先，V2愿景移附录

---

## 文档结构说明

**V0执行版**（当前重点）：
- V0现实架构图（SQLite + 独立部署）
- V0功能清单（P0-14 + P0.5-15A）
- V0执行矩阵（可落地能力）

**V1规划**（3-6个月后）：
- 轻复制能力（partner_id皮肤/海报/小程序）

**V2愿景**（6-12个月后，见附录）：
- 内容自动化（公众号/体验器/实验流水线）

---

## V0阶段：产品验证（当前执行）

### V0核心目标
**2周完成14项P0功能 + 1项P0.5结果回填，独立部署给3-5个朋友验证。**

---

### V0阶段说明（重要）

**V0定位**：朋友验证版，独立部署
- 每个朋友一个独立实例（friend1.yourdomain.com）
- 数据完全隔离（各自独立SQLite）
- 无多租户、无管理后台

**V0不做**（明确边界）：
- ❌ partner_id多租户（V1.0才做）
- ❌ Web管理后台（V1.0才做）
- ❌ 数据飞轮（V1才做，V0只有最小结果回填）
- ❌ 公众号自动化（V2.0才做）

**V0实际功能**：见下方「V0核心功能（10项）」与「V0功能清单」

---

### V0现实架构图（执行版）

```
┌─────────────────────────────────────────────────────────┐
│  独立部署实例（每个朋友独立容器）                          │
│  friend1.yourdomain.com / friend2.yourdomain.com        │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                      前端（React + Ant Design）            │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐│
│  │客户管理  │  │智能体检  │  │产品匹配  │  │任务管理  ││
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘│
└─────────────────────────────────────────────────────────┘
                           ↓ HTTP/JSON
┌─────────────────────────────────────────────────────────┐
│                    后端API（FastAPI）                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐│
│  │客户API   │  │诊断API   │  │匹配API   │  │Skill API ││
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘│
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                  业务逻辑层（Python）                      │
│  ┌─────────────────┐  ┌─────────────────┐              │
│  │ 诊断引擎        │  │ Skill Runner    │              │
│  │ - 六宫格评分    │  │ - 产品匹配      │              │
│  │ - ABC分层       │  │ - 额度计算      │              │
│  │ - 差距分析      │  │ - 热更新        │              │
│  └─────────────────┘  └─────────────────┘              │
│  ┌─────────────────┐  ┌─────────────────┐              │
│  │ 方案引擎        │  │ 审计日志        │              │
│  │ - 方案匹配      │  │ - 操作记录      │              │
│  │ - 任务管理      │  │ - 请求追踪      │              │
│  └─────────────────┘  └─────────────────┘              │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│              数据层（SQLite + File System）               │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐│
│  │客户数据库│  │操作日志  │  │Skill文件 │  │方案文件  ││
│  │(SQLite)  │  │(SQLite)  │  │(YAML)    │  │(YAML)    ││
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘│
│                                                          │
│  注意：V0不做多租户，每个朋友独立数据库（物理隔离）        │
│  注意：tenant_id字段预埋（默认T000），但不做UI/皮肤        │
└─────────────────────────────────────────────────────────┘
```

**V0技术栈（已锁定）**：
- 后端：FastAPI + SQLAlchemy + PyYAML + jsonschema
- 前端：React 18/19 + Vite 6 + Ant Design 5
- 数据库：SQLite（V0零配置）
- 部署：Docker独立容器（每个朋友一个实例）

**V0不做**（避免范围蔓延）：
- ❌ partner_id皮肤/品牌配置（V1做）
- ❌ 朋友圈海报生成器（V1做）
- ❌ 小程序（V1.5做）
- ❌ 公众号自动化（V2做）
- ❌ PostgreSQL/Redis/MinIO/ES（V1+升级）

---

### V0功能清单（统一口径）

**P0-14：闭环必需功能**（2周完成）：
1. 批量导入Excel（13字段）
2. 自动诊断分层（六宫格/ABC）
3. 产品匹配（Skill驱动）
4. 差距诊断（缺口分析）
5. 方案生成（任务化改造）
6. 任务管理（证据上传）
7. 自动提醒（A/B/C分类）
8. 客户详情查看
9. 数据导出
10. 白标配置（Logo/名称）
11. 基础权限（单一管理员）
12. 审计日志（操作追踪）
13. Skill热更新（reload API）
14. 结果回填（P0.5-15A：最小版）

**P0.5-15A：结果回填（最小版）**（第14项功能）：
- 功能：状态回填（通过/拒绝）+ 原因枚举（下拉选择）
- 不做：自动调参/飞轮算法/优化建议（V1数据飞轮做）
- 目的：为V1数据飞轮积累数据，但不做复杂分析
- 说明：这是第14项功能，但标注为P0.5（非核心但重要）

**V0功能数口径**（统一说明）：
- **P0核心功能**：13项（功能1-13，闭环必需）
- **P0.5扩展功能**：1项（功能14：结果回填最小版）
- **总计**：14项功能（13 + 1）
- **注意**：项目进度追踪器中提到的"15项"包含用户激活功能（功能10-14），V0核心是14项

---

### V0核心功能（10项）

| 功能编号 | 功能名称 | 说明 |
|----------|----------|------|
| 功能1 | 客户档案管理 | 批量导入Excel（13字段）、档案查看、搜索 |
| 功能2 | 智能体检系统 | 六宫格评分、ABC分层 |
| 功能3 | 产品匹配引擎 | Skill驱动、准入判断、额度计算 |
| 功能4 | 差距诊断与改造方案 | 缺口分析、方案推荐、任务化改造 |
| 功能5 | 热更新管理 | Skill reload API、缓存TTL |
| 功能6 | 审计日志系统 | 操作记录、请求追踪 |
| 功能7 | 客户详情查看 | 单个客户档案、历史匹配记录、任务进度 |
| 功能8 | 数据导出 | 客户列表/匹配结果/审计日志（Excel/CSV） |
| 功能9 | 白标配置（最小版） | 公司名称、Logo、联系方式（config 配置） |
| 功能10 | 基础权限 | 单一管理员、简单登录认证 |

#### 功能7：客户详情查看

**功能**：
- 查看单个客户完整档案
- 查看历史匹配记录
- 查看改造任务进度

---

#### 功能8：数据导出

**功能**：
- 导出客户列表（Excel）
- 导出匹配结果（Excel）
- 导出审计日志（CSV）

---

#### 功能9：白标配置（最小版）

**功能**：
- 设置公司名称
- 上传Logo
- 设置联系方式

**技术实现**：
- 配置文件（config.yaml）
- 前端读取配置动态展示

---

#### 功能10：基础权限

**功能**：
- 单一管理员账号
- 登录认证（简单密码）

**技术实现**：
- V0不做复杂权限系统
- 只验证管理员密码

---

### V0执行矩阵（可落地能力）

| 能力点 | V0状态 | V0实现方式 | V1+规划 |
|--------|--------|-----------|---------|
| **客户管理** | ✅ | Excel导入/档案查看/搜索 | 增强搜索/筛选 |
| **智能体检** | ✅ | 六宫格评分/ABC分层 | 算法优化 |
| **产品匹配** | ✅ | Skill驱动/热更新 | 更多产品/ML优化 |
| **差距诊断** | ✅ | 缺口分析/方案推荐 | 更精准分析 |
| **任务管理** | ✅ | 任务清单/证据上传 | 任务模板 |
| **审计日志** | ✅ | 操作记录/请求追踪 | 日志分析 |
| **tenant字段预埋** | ✅ | 数据库字段（默认T000） | V1启用 |
| **partner_id皮肤** | ❌ | V0不做 | V1实现 |
| **Web管理后台** | ❌ | V0手动改YAML | V1可视化编辑 |
| **数据飞轮** | ❌ | V0只做回填，不做分析 | V1自动优化 |
| **公众号自动化** | ❌ | V0不做 | V2实现 |
| **体验器** | ❌ | V0不做 | V2实现 |
| **实验流水线** | ❌ | V0不做 | V2实现 |

**关键说明**：
- **tenant字段预埋**：V0数据库表有`tenant_id`字段（默认值`T000`），但不做UI/不做皮肤/不做多租户管理
- **目的**：为V1多租户留接口，避免V1推倒重来
- **V0执行**：每个朋友独立数据库，tenant_id固定为T000，物理隔离

---

### V0交付物清单

**代码交付**：
- [ ] 前端代码（React项目）
- [ ] 后端代码（FastAPI项目）
- [ ] 数据库脚本（SQLite schema，含tenant_id字段预埋）
- [ ] Skill文件（产品YAML，数量待定）
- [ ] 方案文件（方案YAML，V0可能简化使用）
- [ ] 测试用例（单元测试 + 集成测试）

**文档交付**：
- [ ] 部署文档（独立部署，每个朋友独立实例）
- [ ] 使用手册（功能说明）
- [ ] Skill编写指南
- [ ] API文档（自动生成）

**演示交付**：
- [ ] 完整闭环演示（导入→体检→匹配→方案→任务）
- [ ] 热更新演示（改Skill→reload→验证）
- [ ] 审计日志演示（追踪操作记录）

---

### V0审计日志示例（单位明确+脱敏）

**日志格式**（对齐技术员画像v2.2规范）：
```json
{
  "timestamp": "2026-02-12T10:30:45Z",
  "action": "product_match",
  "user": "user_001@example.com",
  "request_id": "req_abc123",
  "customer_id": "CUST_001",
  "object": "skills/products/PRODUCT_CMB_TAX_001.yaml",
  "version": "1.2.0",
  "result": "success",
  "details": {
    "customer_grade": "B",
    "matched_count": 3,
    "top_product": "招商银行税贷",
    "estimated_amount": 540000,
    "amount_unit": "元"
  }
}
```

**单位口径规则（V0强制）**：
- 输入与展示：**万元**（对业务友好）
- 引擎内部计算与存储：**元**（避免浮点精度问题）
- API层做显式转换：`万元 → 元`（输入层） / `元 → 万元`（输出层）

**脱敏规则**：
- 示例邮箱：`user_001@example.com`（不是真实邮箱）
- 示例客户ID：`CUST_001`（不是真实客户）
- 示例公司名：`XX金融服务`（不是真实公司）

**界面示例**（V0简化版）：
```
+------------------------------------------------+
| 审计日志（V0简化版）                            |
+------------------------------------------------+
| 时间范围: [2026-02-01] 至 [2026-02-12]          |
| 事件类型: [全部▼]                               |
| 搜索: [request_id或customer_id] [搜索]          |
+------------------------------------------------+
| 时间               | 事件         | 详情      | 操作 |
+------------------------------------------------+
| 02-12 10:30:45    | 产品匹配     | CUST_001 | [详情] |
| 02-12 10:25:30    | Skill更新    | 招商税贷  | [详情] |
| 02-12 09:15:20    | 客户导入     | 批量50条 | [详情] |
+------------------------------------------------+
```

---

### V0单位口径规则（强制）

**V0统一规则**（必须在2026-02-20前确定，当前临时方案）：

**方案A（推荐）**：输入/展示用万元，引擎内部用元
- 用户输入：15万元（业务友好）
- 引擎存储：150000元（避免浮点精度）
- API转换：输入层 `万元 → 元`，输出层 `元 → 万元`
- Skill阈值：引擎内部用元（如`100000`），description用万元（如"≥10万元"）

**所有金额字段必须标注单位**：
- 代码注释：`monthly_revenue: float  # 单位：元（引擎内部）`
- Skill YAML：`description: "月均流水≥10万元（展示用）"`
- API响应：`{"estimated_amount": 540000, "estimated_amount_unit": "元"}`

---

### V0部署模式（独立部署）

**重要**：V0是独立部署，每个朋友一个独立实例。

```
朋友1实例（friend1.yourdomain.com）
┌─────────────────────────────┐
│  前端 + 后端 + SQLite        │
│  数据完全独立               │
└─────────────────────────────┘

朋友2实例（friend2.yourdomain.com）
┌─────────────────────────────┐
│  前端 + 后端 + SQLite        │
│  数据完全独立               │
└─────────────────────────────┘

⚠️ V0无多租户，每个实例完全独立
```

---

### V0技术架构图（单实例）

```
┌─────────────────────────────────────────────────────────┐
│                      前端（React + Ant Design）            │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐│
│  │客户管理  │  │智能体检  │  │产品匹配  │  │任务管理  ││
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘│
└─────────────────────────────────────────────────────────┘
                           ↓ HTTP/JSON
┌─────────────────────────────────────────────────────────┐
│                    后端API（FastAPI）                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐│
│  │客户API   │  │诊断API   │  │匹配API   │  │Skill API ││
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘│
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                  业务逻辑层（Python）                      │
│  ┌─────────────────┐  ┌─────────────────┐              │
│  │ 诊断引擎        │  │ Skill Runner    │              │
│  │ - 六宫格评分    │  │ - 产品匹配      │              │
│  │ - ABC分层       │  │ - 额度计算      │              │
│  │ - 差距分析      │  │ - 热更新        │              │
│  └─────────────────┘  └─────────────────┘              │
│  ┌─────────────────┐  ┌─────────────────┐              │
│  │ 方案引擎        │  │ 审计日志        │              │
│  │ - 方案匹配      │  │ - 操作记录      │              │
│  │ - 任务管理      │  │ - 请求追踪      │              │
│  └─────────────────┘  └─────────────────┘              │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│              数据层（SQLite + File System）               │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐│
│  │客户数据库│  │操作日志  │  │Skill文件 │  │方案文件  ││
│  │(SQLite)  │  │(SQLite)  │  │(YAML)    │  │(YAML)    ││
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘│
└─────────────────────────────────────────────────────────┘
```

---

### V0交付物清单

**代码交付**：
- [ ] 前端代码（React项目）
- [ ] 后端代码（FastAPI项目）
- [ ] 数据库脚本（SQLite schema）
- [ ] Skill文件（20个产品YAML）
- [ ] 方案文件（12个方案YAML）
- [ ] 测试用例（单元测试 + 集成测试）

**文档交付**：
- [ ] 部署文档（如何启动）
- [ ] 使用手册（功能说明）
- [ ] Skill编写指南
- [ ] API文档（自动生成）

**演示交付**：
- [ ] 完整闭环演示（导入→体检→匹配→方案→任务）
- [ ] 热更新演示（改Skill→reload→验证）
- [ ] 审计日志演示（追踪操作记录）

---

## V1阶段：轻复制能力（3-6个月）

### 核心目标
**能快速复制给其他中介公司使用，支持多租户隔离。**

---

### 新增功能模块

#### 模块7：多租户系统 [V1规划，V0不做]

**V0预埋**（数据层，不做UI）：
- tenant_id字段预埋（数据库表有字段，默认值T000）
- 目的：为V1多租户留接口，避免V1推倒重来
- V0执行：每个朋友独立数据库，tenant_id固定为T000

**V1实现**（功能层）：
- 中介公司注册
- partner_id隔离
- 数据隔离（客户/订单/日志）
- 品牌定制（Logo/名称/联系方式）
- 专属链接/二维码

**轻复制能力**：
```
中介公司A（示例）:
  - partner_id: PARTNER_A
  - 品牌: XX金融服务（示例）
  - 客户数据: 独立隔离
  - 访问入口: https://dcc2026.com/a

中介公司B（示例）:
  - partner_id: PARTNER_B
  - 品牌: YY贷款中介（示例）
  - 客户数据: 独立隔离
  - 访问入口: https://dcc2026.com/b
```

**界面示例**：
```
+------------------------------------------------+
| 中介公司管理                                    |
+------------------------------------------------+
| [新增中介]                                      |
+------------------------------------------------+
| Partner ID | 公司名称         | 客户数 | 状态 | 操作 |
+------------------------------------------------+
| PARTNER_A  | 某某金融服务    | 150   | ✓   | [管理] |
| PARTNER_B  | XX贷款中介      | 80    | ✓   | [管理] |
| PARTNER_C  | YY融资顾问      | 120   | ✓   | [管理] |
+------------------------------------------------+
```

**技术升级**：
- 数据库：SQLite → **PostgreSQL**（支持更多数据）
- 认证：JWT Token（partner_id在token中）
- 数据隔离：Row-level Security

---

#### 模块8：Web管理后台 [V1规划，V0不做]

**V0方式**：手动编辑YAML文件，通过reload API热更新

**V1实现**：
**功能**：
- 在线编辑Skill（不用手动改YAML）
- 可视化配置（表单填写）
- 版本对比
- 一键发布
- 回滚功能

**界面示例**：
```
+------------------------------------------------+
| Skill编辑器 - 招商银行税贷                       |
+------------------------------------------------+
| 基本信息:                                       |
|   产品名称: [招商银行税贷_______________]        |
|   银行代码: [CMB____]                          |
|   产品类型: [税贷▼]                             |
|                                                |
| 准入条件:                                       |
|   [+ 新增条件]                                  |
|   ┌────────────────────────────────────┐      |
|   │ 字段: [月均流水▼]                          │      |
|   │ 操作符: [≥▼]                              │      |
|   │ 阈值: [100000____] 元                     │      |
|   │ 描述: [月均流水≥10万元_______________]      │      |
|   │ [删除]                                     │      |
|   └────────────────────────────────────┘      |
|                                                |
| 额度计算:                                       |
|   公式类型: [表达式▼]                           |
|   公式: [annual_tax * 30_________________]     |
|   最小额度: [30000____] 元                     |
|   最大额度: [1000000__] 元                     |
|                                                |
+------------------------------------------------+
| [保存草稿] [预览] [发布]                        |
+------------------------------------------------+
```

---

#### 模块9：数据飞轮（回填优化） [V1规划，V0只做最小版]

**V0最小版（P0.5-15A）**：
- ✅ 匹配结果回填（通过/拒绝）
- ✅ 原因枚举（下拉选择，如"流水不足"/"纳税不足"/"征信问题"）
- ❌ 不做：数据统计分析、规则优化建议、A/B测试

**V1完整版**：
**功能**：
- 匹配结果回填（通过/拒绝/原因）
- 数据统计分析
- 规则优化建议
- A/B测试

**回填流程**：
```
客户匹配 → 银行申请 → 审批结果
    ↓
回填数据:
  - 客户ID: CUST_001
  - 产品: 招商银行税贷
  - 结果: 拒批
  - 原因: 流水不足（实际9.5万元，要求10万元）
    ↓
    系统分析:
  - 招商税贷阈值可能过严
  - 建议: 降低到9万
    ↓
    人工审核:
  - 决策: 同意降低
    ↓
    自动更新Skill:
  - 阈值: 10万 → 9万
  - 版本: v1.2.0 → v1.3.0
```

**界面示例**：
```
+------------------------------------------------+
| 产品优化建议 - 招商银行税贷                      |
+------------------------------------------------+
| 基于最近50条回填数据分析：                       |
|                                                |
| 问题:                                           |
|   拒批率过高（30/50 = 60%）                     |
|   主要原因: 流水不足（18例）                     |
|                                                |
| 建议:                                           |
|   将流水要求从10万降低到9万                      |
|                                                |
| 预期效果:                                       |
|   拒批率降低: 60% → 40%                         |
|   影响客户: 18人将通过准入                       |
|                                                |
+------------------------------------------------+
| [采纳建议] [拒绝] [查看明细]                     |
+------------------------------------------------+
```

---

### V1技术架构升级
```
┌─────────────────────────────────────────────────────────┐
│                 前端（React + Ant Design）                │
│                      + 管理后台                           │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                    后端API（FastAPI）                      │
│                  + JWT认证 + 多租户                       │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│              业务逻辑层 + 数据飞轮                         │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│        数据层（PostgreSQL + Redis + File System）         │
│        + Row-level Security + 缓存                       │
└─────────────────────────────────────────────────────────┘
```

---

## V2阶段：内容自动化（6-12个月）

### 核心目标
**通过公众号内容获客，建立"内容→体验→试点申请"转化漏斗。**

---

### 新增功能模块

#### 模块10：公众号自动化 [V2规划，V0不做，不进入V0排期]

**V0不做**：V0阶段人工发布公众号内容

**V2实现**：
**功能**：
- 内容实验流水线
- AI生成内容草稿
- 合规检查
- 自动发布
- 数据分析

**内容桶**（9个桶）：
```
6个体质桶:
  1. 流水体质桶
  2. 票税体质桶
  3. 征信体质桶
  4. 资产体质桶
  5. 资质体质桶
  6. 行业体质桶

3个运营桶:
  7. 存量激活SOP桶
  8. 任务化改造桶
  9. 产品匹配方法论桶
```

**内容生成流程**：
```
1. 选择内容桶（如"流水体质桶"）
2. AI生成10个标题候选
3. 选择最佳标题
4. AI生成正文草稿
5. 合规检查（禁用词/必需短语）
6. 人工审核修改
7. 定时发布
8. 数据追踪（打开率/完读率/试点申请）
```

---

#### 模块11：A产品体验器 [V2规划，V0不做，不进入V0排期]

**V0不做**：V0阶段不做体验器

**V2实现**：
**功能**：
- 轻量级体验入口
- 13字段快速输入
- 即时生成ABC报告
- CTA：申请试用

**用户路径**：
```
公众号文章
  ↓
文末CTA: "想试试系统如何自动诊断？点击体验"
  ↓
A产品体验器（13字段表单）
  ↓
获得ABC分层报告
  ↓
报告末尾CTA: "想用这个系统管理200个客户？申请试用"
  ↓
填写试点申请表单
  ↓
销售跟进
```

---

#### 模块12：实验流水线 [V2规划，V0不做，不进入V0排期]

**V0不做**：V0阶段不做实验流水线

**V2实现**：
**功能**：
- A/B测试
- 内容效果追踪
- 实验日志
- 优化建议

**实验示例**：
```
实验1: 标题类型（认知反差 vs 直接收益）
  - 版本A: "月均流水10万就能贷？80%企业都忽略了这3个细节"
  - 版本B: "如何快速提升企业贷款额度：3步实战指南"

  结果:
  - 打开率: A 18.7% vs B 12.3%
  - 完读率: A 38% vs B 42%
  - 试点申请: A 3个 vs B 2个

  结论: 认知反差型标题打开率更高，但完读率略低
```

---

---

## 附录A：V2技术架构全景（愿景规划）

> **注意**：以下为V2愿景架构，不进入V0排期。V0执行时请参考"V0现实架构图"。

```
┌─────────────────────────────────────────────────────────┐
│                     公众号/小程序                          │
│              + 内容发布 + 体验器                          │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                  Web管理后台                              │
│          + 内容实验流水线 + 数据看板                       │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│               后端API + AI辅助层                          │
│     + LLM内容生成 + 合规检查 + 实验引擎                   │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│          业务逻辑层 + Skill系统 + 数据飞轮                │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│    数据层（PostgreSQL + Redis + MinIO + Elasticsearch）  │
└─────────────────────────────────────────────────────────┘
```

**V2技术栈升级**（V0不做）：
- 数据库：PostgreSQL（V1升级）
- 缓存：Redis（V1+）
- 对象存储：MinIO（V2）
- 搜索引擎：Elasticsearch（V2）

---

## V0执行矩阵 + V1/V2愿景矩阵

### V0执行矩阵（当前重点，可落地）

| 能力点 | V0状态 | V0实现方式 | 验收标准 |
|--------|--------|-----------|---------|
| **客户管理** | ✅ | Excel导入/档案查看/搜索 | 能导入50+客户，能查看详情 |
| **智能体检** | ✅ | 六宫格评分/ABC分层 | 分层准确，有评分明细 |
| **产品匹配** | ✅ | Skill驱动/热更新 | 匹配准确，能热更新 |
| **差距诊断** | ✅ | 缺口分析/方案推荐 | 差距清晰，方案可执行 |
| **任务管理** | ✅ | 任务清单/证据上传 | 任务完整，能上传证据 |
| **审计日志** | ✅ | 操作记录/请求追踪 | 日志完整，能追踪操作 |
| **tenant字段预埋** | ✅ | 数据库字段（默认T000） | 表结构有tenant_id，默认T000 |
| **结果回填（最小版）** | ✅ | 状态回填+原因枚举 | 能回填通过/拒绝+原因 |

**V0不做**（避免范围蔓延）：
- ❌ partner_id皮肤/品牌配置（V1做）
- ❌ Web管理后台（V1做）
- ❌ 数据飞轮算法（V1做，V0只做回填）
- ❌ 公众号自动化（V2做）
- ❌ 体验器（V2做）
- ❌ 实验流水线（V2做）

---

### V1/V2愿景矩阵（规划中，不进入V0排期）

| 能力点 | V1状态 | V2状态 | 说明 |
|--------|--------|--------|------|
| **partner_id皮肤** | ✅ | ✅ | 品牌定制/专属链接 |
| **朋友圈海报** | ✅ | ✅ | 6个模板/一键生成 |
| **小程序** | ✅ | ✅ | V1.5实现 |
| **Web管理后台** | ✅ | ✅ | 可视化Skill编辑 |
| **数据飞轮** | ✅ | ✅ | 回填优化/A/B测试 |
| **公众号自动化** | ❌ | ✅ | 内容生成/自动发布 |
| **体验器** | ❌ | ✅ | 轻量级Demo入口 |
| **实验流水线** | ❌ | ✅ | 内容实验/数据追踪 |

---

## 商业模式

### V0阶段（内测，不涉及商业化）

**定位**：朋友验证版
- 免费提供给3-5个朋友
- 独立部署，数据隔离
- 收集反馈，验证可行性

**V0不对外销售**，仅用于验证产品方向。

---

### V1+商业模式（三层金字塔）
```
┌─────────────────────────────────────┐
│   L3: 白标SaaS（¥3.6万/年）          │
│   - 完整系统独立部署                 │
│   - 自有品牌                         │
│   - 数据完全归客户                   │
└─────────────────────────────────────┘
             ↑
┌─────────────────────────────────────┐
│   L2: 轻复制（¥5K试点/季度）         │
│   - 共享系统，租户隔离               │
│   - 品牌皮肤定制                     │
│   - 专属链接/二维码                  │
└─────────────────────────────────────┘
             ↑
┌─────────────────────────────────────┐
│   L1: 开源社区版（免费）             │
│   - Skill系统核心框架                │
│   - 基础匹配引擎                     │
│   - 不含产品库/方案库                │
└─────────────────────────────────────┘
